-- If the version number needs to be updated
-- Go to the last BEGIN END block and update the versions
-- LEAVE the first three blocks AS IS.

declare existing_row number;
begin   
    existing_row := 0;
    select count (*)
    into   existing_row
    from   mobile_app_version
    where  platform = 'ios';
    if (existing_row = 0)
      then
         insert into mobile_app_version (platform, version) values ('ios', '2.0.0');
         commit;
    end if;
exception
  when DUP_VAL_ON_INDEX
  then ROLLBACK;
end;
/
declare existing_row number;
begin
  existing_row := 0;
    select count (*)
    into   existing_row
    from   mobile_app_version
    where  platform = 'ios';
    if (existing_row = 0)
      then
        insert into mobile_app_version (platform, version) values ('android', '2.0.0');
        commit;
    end if;
exception
  when DUP_VAL_ON_INDEX
  then ROLLBACK;
end;
/
declare existing_row number;
begin
  existing_row := 0;
    select count (*)
    into   existing_row
    from   mobile_app_version
    where  platform = 'windows';
    if (existing_row = 0)
      then
         insert into mobile_app_version (platform, version) values ('android', '1.0.0');
         commit;
    end if;
exception
  when DUP_VAL_ON_INDEX
  then ROLLBACK;
end;
/

-- UPDATE ANY VERSION CHANGES HERE ONLY
-- LEAVE THE INSERT STATEMENTS AS IS

begin
    update mobile_app_version set version = '2.0.0' where platform = 'ios';
    update mobile_app_version set version = '2.0.0' where platform = 'android';
    update mobile_app_version set version = '1.0.0' where platform = 'windows';
    commit;
end;
/