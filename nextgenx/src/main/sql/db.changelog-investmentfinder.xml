<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet
        id="investment-finder-asset-create-table"
        author="m040005"
        dbms="h2"
        runOnChange="true">
        <comment>
            This table holds the data used to enable the InvestmentFinder functionality.
            The data in this table will be refreshed daily with data aggregated from several external sources.

            See:
            https://confluence.fx.srv.westpac.com.au/display/BP/Investment+Finder
        </comment>
        <createTable tableName="INVESTMENT_FINDER_ASSET">
            <column
                name="ASSET_CODE"
                type="VARCHAR2(50)">
                <constraints
                    primaryKey="true"
                    nullable="false" />
            </column>
            <column
                name="ASSET_TYPE"
                type="VARCHAR2(20)" />
            <column
                name="NAME"
                type="VARCHAR2(300)" />
            <column
                name="ISIN"
                type="VARCHAR2(12)" />
            <column
                name="SECURITY_CODE"
                type="VARCHAR2(20)" />
            <column
                name="EXCHANGE_CODE"
                type="VARCHAR2(5)" />
            <column
                name="GICS_SECTOR"
                type="VARCHAR2(100)" />
            <column
                name="GICS_INDUSTRY"
                type="VARCHAR2(20)" />
            <column
                name="ASX_50"
                type="NUMBER(1)" />
            <column
                name="ASX_200"
                type="NUMBER(1)" />
            <column
                name="ASX_300"
                type="NUMBER(1)" />
            <column
                name="EPS_1YR"
                type="NUMBER(19,2)" />
            <column
                name="EPS_3YR"
                type="NUMBER(19,2)" />
            <column
                name="EPS_5YR"
                type="NUMBER(19,2)" />
            <column
                name="MARKET_CAPITILISATION"
                type="NUMBER(19,2)" />
            <column
                name="DIVIDEND_YIELD_1YR"
                type="NUMBER(19,2)" />
            <column
                name="SUSTAINABILITY_SCORE"
                type="NUMBER(19,2)" />
            <column
                name="PERF_DATA_POINTS_1YR"
                type="VARCHAR2(4000)" />
            <column
                name="APIR_CODE"
                type="VARCHAR2(20)" />
            <column
                name="FUND_STANDARD_NAME"
                type="VARCHAR2(300)" />
            <column
                name="FUND_LEGAL_NAME"
                type="VARCHAR2(300)" />
            <column
                name="FUND_MANAGER_NAME"
                type="VARCHAR2(200)" />
            <column
                name="FUND_CATEGORY"
                type="VARCHAR2(100)" />
            <column
                name="INDIRECT_COST_RATIO"
                type="NUMBER(19,2)" />
            <column
                name="ALLOC_AUST_SHARES"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_SHARES"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_AUST_PROPERTY"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_PROPERTY"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_AUST_CASH"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_CASH"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_AUST_FIXED_INTEREST"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_FIXED_INTEREST"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_TOTAL_AUSTRALIAN"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_TOTAL_INTERNATIONAL"
                type="NUMBER(4,2)" />
            <column
                name="TOTAL_INCOME_1YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_RETURN_1YR"
                type="NUMBER(19,2)" />
        </createTable>
    </changeSet>

    <changeSet
        id="alter-investment-finder-asset-table"
        author="m040005"
        dbms="h2">
        <addColumn tableName="INVESTMENT_FINDER_ASSET">
            <column
                name="COST"
                type="NUMBER(19,2)" />
            <column
                name="PERFORMANCE_1YR"
                type="NUMBER(19,2)" />
            <column
                name="PERFORMANCE_3YR"
                type="NUMBER(19,2)" />
            <column
                name="PERFORMANCE_5YR"
                type="NUMBER(19,2)" />
            <column
                name="ISSUER"
                type="VARCHAR2(50)" />
            <column
                name="BENCHMARK"
                type="VARCHAR2(50)" />
            <column
                name="ALLOC_CASH"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_SHARES"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_MF"
                type="NUMBER(4,2)" />
            <column
                name="TOTAL_INCOME_3YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_INCOME_5YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_RETURN_3YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_RETURN_5YR"
                type="NUMBER(19,2)" />
        </addColumn>
    </changeSet>

    <changeSet
        id="investment-finder-asset-create-table"
        author="m040005"
        dbms="oracle">
        <comment>
            This table holds the data used to enable the InvestmentFinder functionality.
            The data in this table will be refreshed daily with performance data aggregated from several external
            sources.

            See: https://confluence.fx.srv.westpac.com.au/display/BP/Investment+Finder
        </comment>
        <createTable tableName="INVESTMENT_FINDER_ASSET">
            <column
                name="ASSET_CODE"
                type="VARCHAR2(50)">
                <constraints
                    primaryKey="true"
                    nullable="false" />
            </column>
            <column
                name="ASSET_TYPE"
                type="VARCHAR2(20)" />
            <column
                name="NAME"
                type="VARCHAR2(300)" />
            <column
                name="ISIN"
                type="VARCHAR2(12)" />
            <column
                name="SECURITY_CODE"
                type="VARCHAR2(20)" />
            <column
                name="EXCHANGE_CODE"
                type="VARCHAR2(5)" />
            <column
                name="GICS_SECTOR"
                type="VARCHAR2(100)" />
            <column
                name="GICS_INDUSTRY"
                type="VARCHAR2(20)" />
            <column
                name="ASX_50"
                type="NUMBER(1)" />
            <column
                name="ASX_200"
                type="NUMBER(1)" />
            <column
                name="ASX_300"
                type="NUMBER(1)" />
            <column
                name="EPS_1YR"
                type="NUMBER(19,2)" />
            <column
                name="EPS_3YR"
                type="NUMBER(19,2)" />
            <column
                name="EPS_5YR"
                type="NUMBER(19,2)" />
            <column
                name="MARKET_CAPITILISATION"
                type="NUMBER(19,2)" />
            <column
                name="DIVIDEND_YIELD_1YR"
                type="NUMBER(19,2)" />
            <column
                name="SUSTAINABILITY_SCORE"
                type="NUMBER(19,2)" />
            <column
                name="PERF_DATA_POINTS_1YR"
                type="VARCHAR2(4000)" />
            <column
                name="COST"
                type="NUMBER(19,2)" />
            <column
                name="PERFORMANCE_1YR"
                type="NUMBER(19,2)" />
            <column
                name="PERFORMANCE_3YR"
                type="NUMBER(19,2)" />
            <column
                name="PERFORMANCE_5YR"
                type="NUMBER(19,2)" />
            <column
                name="ISSUER"
                type="VARCHAR2(50)" />
            <column
                name="BENCHMARK"
                type="VARCHAR2(50)" />
            <column
                name="APIR_CODE"
                type="VARCHAR2(20)" />
            <column
                name="FUND_STANDARD_NAME"
                type="VARCHAR2(300)" />
            <column
                name="FUND_LEGAL_NAME"
                type="VARCHAR2(300)" />
            <column
                name="FUND_MANAGER_NAME"
                type="VARCHAR2(200)" />
            <column
                name="FUND_CATEGORY"
                type="VARCHAR2(100)" />
            <column
                name="INDIRECT_COST_RATIO"
                type="NUMBER(19,2)" />
            <column
                name="ALLOC_AUST_SHARES"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_SHARES"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_AUST_PROPERTY"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_PROPERTY"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_AUST_CASH"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_CASH"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_AUST_FIXED_INTEREST"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_INT_FIXED_INTEREST"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_CASH"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_SHARES"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_MF"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_TOTAL_AUSTRALIAN"
                type="NUMBER(4,2)" />
            <column
                name="ALLOC_TOTAL_INTERNATIONAL"
                type="NUMBER(4,2)" />
            <column
                name="TOTAL_INCOME_1YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_INCOME_3YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_INCOME_5YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_RETURN_1YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_RETURN_3YR"
                type="NUMBER(19,2)" />
            <column
                name="TOTAL_RETURN_5YR"
                type="NUMBER(19,2)" />
        </createTable>
    </changeSet>

    <changeSet
        id="investment-watchlist-create-table"
        author="m040005">
        <comment>
            This table holds the data used to enable the watchlist functionality.
        </comment>
        <createTable tableName="INVESTMENT_WATCHLIST">
            <column
                name="WATCHLIST_ID"
                type="VARCHAR2(50)">
                <constraints
                    primaryKey="true"
                    nullable="false" />
            </column>
            <column
                name="WATCHLIST_NAME"
                type="VARCHAR2(100)" />
            <column
                name="OWNER_ID"
                type="VARCHAR2(20)" />
        </createTable>

        <createTable tableName="INV_WATCHLIST_ASSET_CODES">
            <column
                name="WATCHLIST_ID"
                type="VARCHAR2(50)" />
            <column
                name="ASSET_CODE"
                type="VARCHAR2(20)" />
        </createTable>
    </changeSet>

</databaseChangeLog>
