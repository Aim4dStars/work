CREATE OR REPLACE TRIGGER LOG_APP_FAILURE_TRIG
  AFTER INSERT OR UPDATE OF STATUS, FAILURE_MESSAGE
  ON ONBOARDING_APPLICATION
  FOR EACH ROW
  WHEN (
    NEW.STATUS is not null OR 
    NEW.STATUS != '' OR
    NEW.FAILURE_MESSAGE is not null OR
    NEW.FAILURE_MESSAGE != ''
  )
  
BEGIN
  INSERT INTO ONBOARDING_LOG(LOG_ID, ONBOARDING_APPLICATION_ID, STATUS, FAILURE_MESSAGE, EVENT_TYPE, HAS_BEEN_LOGGED) 
  VALUES (ONBOARDING_LOG_SEQ.NEXTVAL, :NEW.ID, :NEW.STATUS, :NEW.FAILURE_MESSAGE, 'FAILURE', '0');
END LOG_APP_FAILURE_TRIG;
/