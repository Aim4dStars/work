{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "javaType" : "com.bt.nextgen.api.draftaccount.schemas.v1.OnboardingApplicationFormData",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "this is the application Account JSON Schema Version number supported by client & server (http://semver.org/)",
      "pattern": "^[1-99]{1}.[0-99]{1}.[0-99]{1}$"
    },
    "parentProductName" : {
      "type": "string",
      "description": "This field contains the parent product name for this account."
    },
    "accountType": {
      "$ref": "base/accountTypeEnum.json"
    },
    "approvalType": {
      "$ref": "base/approvalTypeEnum.json",
      "description": "This field indicates the type of approval method selected for this account."
    },
    "trustType": {
      "$ref": "base/trustTypeEnum.json"
    },
    "trustdetails": {
      "type": "object",
      "$ref": "trust/trustdetailsSchema.json"
    },
    "pensioneligibility": {
      "type": "object",
      "$ref": "pensioneligibility/pensionEligibilitySchema.json",
      "description": "This schema is used for the Super Pension eligibility applicable only for super pension account."
     },
    "smsfdetails": {
      "type": "object",
      "$ref": "smsf/smsfdetailsSchema.json"
    },
    "directors": {
      "type": "array",
      "items": {
        "$ref" : "customer/customerSchema.json"
      }
    },
    "trustees": {
      "type": "array",
      "items": {
        "$ref" : "customer/customerSchema.json"
      }
    },
    "investors": {
      "type": "array",
      "items": {
        "$ref" : "customer/customerSchema.json"
      }
    },
    "companydetails": {
      "$ref": "company/companydetailsSchema.json"
    },
    "shareholderandmembers": {
      "type": "object",
      "$ref": "company/shareholderandmembersSchema.json"
    },
    "accountsettings": {
      "$ref": "accountsettings/accountsettingsSchema.json"
    },
    "companytrustee": {
      "$ref": "company/companydetailsSchema.json"
    },
    "linkedaccounts": {
      "$ref": "linkedaccounts/linkedAccountsApplicationSchema.json"
    },
    "fees": {
      "$ref": "fees/feesSchema.json"
    }
  },
  "additionalProperties": false,
  "allOf":[
    {
      "required": [
        "version",
        "accountType",
        "accountsettings",
        "linkedaccounts"
      ],
      "description": "required for all account types"
    },
    {
      "oneOf":[
        {
          "required": [ "investors" ],
          "description": "required only for individual account"
        },
        {
          "required": [ "companydetails", "directors", "shareholderandmembers" ],
          "description": "required only for company account"
        },
        {
          "required": [ "trustdetails", "trustees", "trustType", "shareholderandmembers" ],
          "description": "required only for Individual Trust account"
        },
        {
          "required": [ "trustdetails", "companytrustee", "trustType", "shareholderandmembers" ],
          "description": "required only for Company Trust account"
        },
        {
          "required": [ "smsfdetails", "trustees", "shareholderandmembers" ],
          "description": "required only for SMSF Individual account"
        },
        {
          "required": [ "smsfdetails", "companytrustee", "directors", "shareholderandmembers" ],
          "description": "required only for SMSF Corporate account"
        }
      ]
    }
  ]
}